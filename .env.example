# Ensure user-local binaries are available (useful for systemd user services too)
PATH="$HOME/.local/bin:$PATH"

# Core Telegram settings
TELEGRAM_BOT_TOKEN=replace_me
TELEGRAM_CHAT_ID=replace_me
# Optional: HTML (default), Markdown, MarkdownV2, or off
TELEGRAM_PARSE_MODE=HTML

# Runtime location
TIMEZONE=Pacific/Auckland
SQLITE_DB_PATH=./state.db
LOG_DIR=./LOGS

# Telegram ingress — poll mode (default)
POLL_INTERVAL_SECONDS=2
WEBHOOK_MODE=off

# Webhook mode — set WEBHOOK_MODE=on and configure below
WEBHOOK_BIND=127.0.0.1:8787
WEBHOOK_PUBLIC_URL=https://your-domain.example.com
WEBHOOK_SECRET=

# Cloudflare Tunnel (for systemd unit; get token from dashboard)
CLOUDFLARED_TUNNEL_TOKEN=

# ASR contract
# Script entrypoint contract: receives "<audio_file>" and prints transcript to stdout.
ASR_SCRIPT=./scripts/asr.sh
ASR_URL=http://localhost:18000
ASR_FILE_FIELD=file
ASR_TEXT_JQ='.text // .result // .data.text // .data.result // empty'
ASR_PREPROCESS=on
ASR_SAMPLE_RATE=16000
# Optional command-mode ASR (if set, this takes precedence over ASR_URL)
# The command is evaluated with AUDIO_INPUT and AUDIO_INPUT_PREP exported and should print transcript text.
ASR_CMD_TEMPLATE=''
# Example:
# ASR_CMD_TEMPLATE='glm-asr transcribe "$AUDIO_INPUT_PREP"'

# TTS contract
# Script entrypoint contract: receives "<text> <output_ogg>" and writes the output file.
TTS_SCRIPT=./scripts/tts.sh
# The command is evaluated with TEXT and WAV_OUTPUT exported.
# Optional runtime libraries (kitten-say style defaults). Leave empty to omit.
ORT_LIB="$HOME/.local/opt/onnxruntime/onnxruntime-linux-x64-gpu-1.23.2/lib/libonnxruntime.so"
CUDA_LIB_DIR="$HOME/.local/opt/cuda12-runtime/lib"
CUDNN_LIB_DIR="/usr/lib"
# Example for kitten-tts (adjust flags to your local build if needed):
TTS_CMD_TEMPLATE='kitten-tts synthesize --phonemizer espeak-ng ${ORT_LIB:+--ort-lib "$ORT_LIB"} ${CUDA_LIB_DIR:+--cuda-lib-dir "$CUDA_LIB_DIR"} ${CUDNN_LIB_DIR:+--cudnn-lib-dir "$CUDNN_LIB_DIR"} --text "$TEXT" --output "$WAV_OUTPUT"'
# Alternate example:
# TTS_CMD_TEMPLATE='kitten-tts-rs --text "$TEXT" --output "$WAV_OUTPUT"'
VOICE_BITRATE=32k
TTS_MAX_CHARS=260

# Agent provider switch (default keeps existing behavior)
AGENT_PROVIDER=codex
# Optional script-provider command. Used only when AGENT_PROVIDER=script.
# The command receives full runtime context via stdin and should output marker lines.
# AGENT_CONTEXT_FILE and AGENT_PROGRESS_MSG_ID are exported for compatibility.
AGENT_CMD_TEMPLATE=''
# Example — Gemini CLI headless, simple (no streaming progress):
# AGENT_CMD_TEMPLATE='gemini -p "" -o text --yolo'
# Example — with streaming progress via wrapper (see scripts/example-agent-wrapper.sh):
# AGENT_CMD_TEMPLATE='./scripts/example-agent-wrapper.sh'

# Codex provider settings
CODEX_BIN=codex
CODEX_MODEL=
CODEX_REASONING_EFFORT=
EXEC_POLICY=yolo
ALLOWLIST_PATH=./config/allowlist.txt

# pi provider settings
PI_BIN=pi
PI_PROVIDER=
PI_MODEL=
PI_MODE=text
PI_EXTRA_ARGS=

# v0.2 options
LOCAL_SPEAKER_PLAYBACK=off
SPEAKER_PLAY_CMD='ffplay -nodisp -autoexit "$VOICE_FILE"'
HEARTBEAT_HOUR_LOCAL=09
NIGHTLY_REFLECTION_FILE=./LOGS/nightly_reflection.md
# Set to on for dry-runs (skip calling agent/codex and only write a template block)
NIGHTLY_REFLECTION_SKIP_AGENT=off
