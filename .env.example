# Ensure user-local binaries are available (useful for systemd user services too)
PATH="$HOME/.local/bin:$PATH"

# Core Telegram settings
TELEGRAM_BOT_TOKEN=replace_me
TELEGRAM_CHAT_ID=replace_me

# Runtime location
TIMEZONE=Pacific/Auckland
SQLITE_DB_PATH=./state.db
LOG_DIR=./LOGS

# Telegram ingress — poll mode (default)
POLL_INTERVAL_SECONDS=2
WEBHOOK_MODE=off

# Webhook mode — set WEBHOOK_MODE=on and configure below
WEBHOOK_BIND=127.0.0.1:8787
WEBHOOK_PUBLIC_URL=https://your-domain.example.com
WEBHOOK_SECRET=

# Cloudflare Tunnel (for systemd unit; get token from dashboard)
CLOUDFLARED_TUNNEL_TOKEN=

# ASR contract
ASR_URL=http://localhost:18000
ASR_FILE_FIELD=file
ASR_TEXT_JQ='.text // .result // .data.text // .data.result // empty'
ASR_PREPROCESS=on
ASR_SAMPLE_RATE=16000
# Optional command-mode ASR (if set, this takes precedence over ASR_URL)
# The command is evaluated with AUDIO_INPUT and AUDIO_INPUT_PREP exported and should print transcript text.
ASR_CMD_TEMPLATE=''
# Example:
# ASR_CMD_TEMPLATE='glm-asr transcribe "$AUDIO_INPUT_PREP"'

# TTS contract
# The command is evaluated with TEXT and WAV_OUTPUT exported.
# Optional runtime libraries (kitten-say style defaults). Leave empty to omit.
ORT_LIB="$HOME/.local/opt/onnxruntime/onnxruntime-linux-x64-gpu-1.23.2/lib/libonnxruntime.so"
CUDA_LIB_DIR="$HOME/.local/opt/cuda12-runtime/lib"
CUDNN_LIB_DIR="/usr/lib"
# Example for kitten-tts (adjust flags to your local build if needed):
TTS_CMD_TEMPLATE='kitten-tts synthesize --phonemizer espeak-ng ${ORT_LIB:+--ort-lib "$ORT_LIB"} ${CUDA_LIB_DIR:+--cuda-lib-dir "$CUDA_LIB_DIR"} ${CUDNN_LIB_DIR:+--cudnn-lib-dir "$CUDNN_LIB_DIR"} --text "$TEXT" --output "$WAV_OUTPUT"'
# Alternate example:
# TTS_CMD_TEMPLATE='kitten-tts-rs --text "$TEXT" --output "$WAV_OUTPUT"'
VOICE_BITRATE=32k
TTS_MAX_CHARS=260

# Codex contract
CODEX_BIN=codex
CODEX_MODEL=
EXEC_POLICY=yolo
ALLOWLIST_PATH=./config/allowlist.txt

# v0.2 options
LOCAL_SPEAKER_PLAYBACK=off
SPEAKER_PLAY_CMD='ffplay -nodisp -autoexit "$VOICE_FILE"'
HEARTBEAT_HOUR_LOCAL=09
NIGHTLY_REFLECTION_FILE=./LOGS/nightly_reflection.md
# Set to on for dry-runs (skip calling agent/codex and only write a template block)
NIGHTLY_REFLECTION_SKIP_AGENT=off
